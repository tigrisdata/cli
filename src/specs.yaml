name: tigris
alias: t3
description: Command line interface for Tigris
version: 0.0.1

# Reusable option definitions
definitions:
  tier_options: &tier_options
    - name: Standard
      value: STANDARD
      description: The default storage class. It provides high durability, availability, and performance for frequently accessed data.
    - name: Infrequent Access
      value: STANDARD_IA
      description: Lower-cost storage for data that is accessed less frequently but requires rapid access when needed.
    - name: Archive
      value: GLACIER
      description: Low-cost storage for data archiving. Long-term data archiving with infrequent access.
    - name: Instant Retrieval Archive
      value: GLACIER_IR
      description: Lowest-cost storage for long-lived data that is rarely accessed and requires retrieval in milliseconds.

  consistency_options: &consistency_options
    - name: Default
      value: default
      description: Strict read-after-write consistency in same region. Eventual consistency globally.
    - name: Strict
      value: strict
      description: Strict read-after-write consistency globally. Latency will be higher than the default.

  region_options: &region_options
    - name: Global
      value: 'global'
      description: Global
    - name: USA
      value: usa
      description: Restrict to USA
    - name: Europe
      value: eur
      description: Restrict to Europe
    - name: Amsterdam, Netherlands
      value: ams
      description: Amsterdam, Netherlands
    - name: Frankfurt, Germany
      value: fra
      description: Frankfurt, Germany
    - name: Sao Paulo, Brazil
      value: gru
      description: Sao Paulo, Brazil
    - name: Ashburn, Virginia (US)
      value: iad
      description: Ashburn, Virginia (US)
    - name: Johannesburg, South Africa
      value: jnb
      description: Johannesburg, South Africa
    - name: London, United Kingdom
      value: lhr
      description: London, United Kingdom
    - name: Tokyo, Japan
      value: nrt
      description: Tokyo, Japan
    - name: Chicago, Illinois (US)
      value: ord
      description: Chicago, Illinois (US)
    - name: Singapore, Singapore
      value: sin
      description: Singapore, Singapore
    - name: San Jose, California (US)
      value: sjc
      description: San Jose, California (US)
    - name: Sydney, Australia
      value: syd
      description: Sydney, Australia

  access_options: &access_options [public, private]

commands:
  #########################
  # Authentication
  #########################
  # configure
  - name: configure
    description: Save access-key credentials to ~/.tigris/config.json for persistent use across all commands
    alias: c
    examples:
      - 'tigris configure --access-key tid_AaBb --access-secret tsec_XxYy'
      - 'tigris configure --endpoint https://custom.endpoint.dev'
    messages:
      onStart: 'Saving credentials...'
      onSuccess: 'Credentials saved to ~/.tigris/config.json. You can now use all tigris commands.'
      onFailure: 'Failed to save credentials'
    arguments:
      - name: access-key
        description: Your Tigris access key ID
        alias: key
        required: false
      - name: access-secret
        description: Your Tigris secret access key
        alias: secret
        required: false
      - name: endpoint
        description: 'Tigris API endpoint (default: https://t3.storage.dev)'
        alias: e
        required: false

  # login
  - name: login
    description: Start a session via OAuth (default) or temporary credentials. Session state is cleared on logout
    examples:
      - 'tigris login'
      - 'tigris login oauth'
      - 'tigris login credentials --access-key tid_AaBb --access-secret tsec_XxYy'
    messages:
      onStart: ''
      onSuccess: 'Login successful'
      onFailure: 'Login failed'
    alias: l
    arguments:
      - name: access-key
        description: Use temporary credentials instead of OAuth (useful for testing different keys)
        alias: key
        required: false
      - name: access-secret
        description: Secret for temporary credentials
        alias: secret
        required: false
    commands:
      # login (main interactive operation)
      - name: select
        description: Choose how to login - OAuth (browser) or credentials (access key)
        messages:
          onStart: ''
          onSuccess: 'Login successful'
          onFailure: 'Login failed'
      # oauth
      - name: oauth
        description: Login via browser using OAuth2 device flow. Best for interactive use
        alias: o
        examples:
          - 'tigris login oauth'
        messages:
          onStart: 'Opening browser for authentication...'
          onSuccess: "Logged in successfully\nOrganization '{{org}}' selected"
          onFailure: 'Authentication failed'
          onAlreadyDone: "Already logged in.\nRun \"tigris logout\" first to switch accounts."
          hint: "You have {{count}} organizations.\nRun \"tigris orgs list\" to switch."
      # credentials
      - name: credentials
        description: Login with an access key and secret. Creates a temporary session that is cleared on logout
        alias: c
        examples:
          - 'tigris login credentials --access-key tid_AaBb --access-secret tsec_XxYy'
          - 'tigris login credentials'
        messages:
          onStart: 'Authenticating...'
          onSuccess: 'Logged in with credentials'
          onFailure: 'Authentication failed'
        arguments:
          - name: access-key
            description: Your access key ID (will prompt if not provided)
            alias: key
            required: false
          - name: access-secret
            description: Your secret access key (will prompt if not provided)
            alias: secret
            required: false
    default: select

  # whoami
  - name: whoami
    description: Print the currently authenticated user, organization, and auth method
    alias: w
    examples:
      - 'tigris whoami'
    messages:
      onStart: ''
      onSuccess: ''
      onFailure: 'Failed to get user information'
      onAlreadyDone: "Not authenticated\nRun \"tigris login\" to authenticate"

  # logout
  - name: logout
    description: End the current session and clear login state. Credentials saved via 'configure' are kept
    examples:
      - 'tigris logout'
    messages:
      onStart: 'Logging out...'
      onSuccess: 'Logged out. Your configured credentials are still saved.'
      onFailure: 'Failed to logout'

  # credentials
  - name: credentials
    description: Test whether your current credentials can reach Tigris and optionally verify access to a specific bucket
    alias: creds
    examples:
      - 'tigris credentials test'
      - 'tigris credentials test --bucket my-bucket'
    commands:
      - name: test
        description: Verify that current credentials are valid. Optionally checks access to a specific bucket
        alias: t
        examples:
          - 'tigris credentials test'
          - 'tigris credentials test --bucket my-bucket'
        messages:
          onStart: 'Testing credentials...'
          onSuccess: 'Credentials are valid'
          onFailure: 'Credentials test failed'
        arguments:
          - name: bucket
            description: Bucket name to test access against (optional)
            alias: b
            required: false

  #########################
  # Unix style commands
  #########################
  # ls
  - name: ls
    description: List all buckets (no arguments) or objects under a bucket/prefix path. Accepts bare names or t3:// URIs
    alias: list
    examples:
      - 'tigris ls'
      - 'tigris ls my-bucket'
      - 'tigris ls my-bucket/images/'
      - 'tigris ls t3://my-bucket/prefix/'
    messages:
      onFailure: 'Failed to list. Verify the bucket exists and your credentials have access'
      onEmpty: 'No results found. Run "tigris ls" to see all buckets'
    arguments:
      - name: path
        type: positional
        description: A bucket name or bucket/prefix path. Omit to list all buckets. Supports t3:// and tigris:// prefixes
        examples:
          - my-bucket
          - my-bucket/my-path
          - t3://my-bucket
          - t3://my-bucket/my-path

  # mk
  - name: mk
    description: Create a bucket (bare name) or a folder inside a bucket (bucket/folder/ with trailing slash)
    alias: create
    examples:
      - 'tigris mk my-bucket'
      - 'tigris mk my-bucket/images/'
      - 'tigris mk t3://my-bucket'
    messages:
      onFailure: 'Failed to create. Check the name is valid and your credentials have write access'
    arguments:
      - name: path
        required: true
        type: positional
        description: A bucket name or bucket/folder/ path. Trailing slash creates a folder inside the bucket. Supports t3:// and tigris:// prefixes
        examples:
          - my-bucket
          - my-bucket/my-path
          - t3://my-bucket
          - t3://my-bucket/my-path

  # touch
  - name: touch
    description: Create an empty (zero-byte) object at the given bucket/key path
    examples:
      - 'tigris touch my-bucket/placeholder.txt'
      - 'tigris touch t3://my-bucket/logs/'
    messages:
      onFailure: 'Failed to create object. Verify the bucket exists and your credentials have write access'
    arguments:
      - name: path
        required: true
        type: positional
        description: Object path as bucket/key. Supports t3:// and tigris:// prefixes
        examples:
          - my-bucket/my-file.txt
          - t3://my-bucket/my-file.txt

  # stat
  - name: stat
    description: Show storage stats (no args), bucket info, or object metadata
    examples:
      - 'tigris stat'
      - 'tigris stat t3://my-bucket'
      - 'tigris stat t3://my-bucket/my-object.json'
    messages:
      onStart: ''
      onSuccess: ''
      onFailure: 'Failed to get stats'
    arguments:
      - name: path
        required: false
        type: positional
        description: Optional bucket or object path. Without it, shows overall storage stats
        examples:
          - t3://my-bucket
          - t3://my-bucket/my-path
          - t3://my-bucket/my-object.json
      - name: format
        description: Output format
        alias: f
        options: [json, table, xml]
        default: table

  # cp
  - name: cp
    description: Copy files between local filesystem and Tigris, or between paths within Tigris. At least one side must be a remote t3:// path
    alias: copy
    examples:
      - 'tigris cp ./file.txt t3://my-bucket/file.txt'
      - 'tigris cp t3://my-bucket/file.txt ./local-copy.txt'
      - 'tigris cp t3://my-bucket/src/ t3://my-bucket/dest/ -r'
      - 'tigris cp ./images/ t3://my-bucket/images/ -r'
    messages:
      onFailure: 'Copy failed. Verify both paths are correct and credentials have access'
    arguments:
      - name: src
        required: true
        type: positional
        description: Source path. Use t3:// (or tigris://) prefix for remote Tigris paths, bare paths for local files. At least one side must be remote. Quote wildcard patterns to prevent shell expansion
        examples:
          - ./file.txt
          - ./dir/
          - '"./dir/*.jpg"'
          - t3://my-bucket/my-path/my-object.json
          - t3://my-bucket/my-path/*
      - name: dest
        required: true
        type: positional
        description: Destination path. Use t3:// (or tigris://) prefix for remote Tigris paths, bare paths for local files
        examples:
          - .
          - ./local-dir/
          - t3://my-bucket
          - t3://my-bucket/my-path/
      - name: recursive
        type: flag
        alias: r
        description: Copy directories recursively

  # mv
  - name: mv
    description: Move (rename) objects within Tigris. Both source and destination must be remote t3:// paths
    alias: move
    examples:
      - 'tigris mv t3://my-bucket/old.txt t3://my-bucket/new.txt -f'
      - 'tigris mv t3://my-bucket/old-dir/ t3://my-bucket/new-dir/ -rf'
      - 'tigris mv my-bucket/a.txt my-bucket/b.txt -f'
    messages:
      onFailure: 'Move failed. Verify both paths are remote and credentials have access'
    arguments:
      - name: src
        type: positional
        required: true
        description: Remote source path. Use t3:// (or tigris://) prefix. Quote wildcard patterns to prevent shell expansion
        examples:
          - t3://my-bucket/my-path/my-object.json
          - t3://my-bucket/my-path/
          - '"t3://my-bucket/my-path/*.jpg"'
      - name: dest
        type: positional
        required: true
        description: Remote destination path. Use t3:// (or tigris://) prefix
        examples:
          - t3://my-bucket
          - t3://my-bucket/new-path/
      - name: recursive
        type: flag
        alias: r
        description: Move directories recursively
      - name: force
        type: flag
        alias: f
        description: Skip confirmation prompt

  # rm
  - name: rm
    description: Remove a bucket, folder, or object from Tigris. A bare bucket name deletes the bucket itself
    alias: remove
    examples:
      - 'tigris rm t3://my-bucket/file.txt -f'
      - 'tigris rm t3://my-bucket/folder/ -rf'
      - 'tigris rm t3://my-bucket -f'
      - 'tigris rm "t3://my-bucket/logs/*.tmp" -f'
    messages:
      onFailure: 'Remove failed. Verify the path exists and credentials have delete access'
    arguments:
      - name: path
        type: positional
        required: true
        description: Remote path to remove. A bucket-only path removes the bucket. Use t3:// (or tigris://) prefix. Quote wildcard patterns to prevent shell expansion
        examples:
          - t3://my-bucket
          - t3://my-bucket/my-path/my-object.json
          - t3://my-bucket/my-path/
          - '"t3://my-bucket/my-path/*.jpg"'
      - name: recursive
        type: flag
        alias: r
        description: Remove directories recursively
      - name: force
        type: flag
        alias: f
        description: Skip confirmation prompt

  #########################
  # Manage organizations
  #########################
  - name: organizations
    alias: orgs
    description: List, create, and switch between organizations. An organization is a workspace that contains your resources like buckets and access keys
    examples:
      - 'tigris orgs list'
      - 'tigris orgs create my-org'
      - 'tigris orgs select my-org'
    commands:
      # list
      - name: list
        description: List all organizations you belong to and interactively select one as active
        alias: l
        examples:
          - 'tigris orgs list'
          - 'tigris orgs list --format json'
        messages:
          onStart: 'Listing organizations...'
          onSuccess: "Organization '{{name}}' selected"
          onFailure: 'Failed to select organization'
          onEmpty: "No organizations found. You may need to re-authenticate.\nRun: tigris login"
        arguments:
          - name: format
            description: Output format
            alias: f
            options: [json, table, xml, select]
            default: select
          - name: select
            description: Interactive selection mode
            alias: i
            type: flag
      - name: create
        description: Create a new organization with the given name
        alias: c
        examples:
          - 'tigris orgs create my-org'
        messages:
          onStart: 'Creating organization...'
          onSuccess: "Organization '{{name}}' created successfully\nOrganization ID: {{id}}"
          onFailure: 'Failed to create organization'
          hint: "Next steps:\n   - Select this organization: tigris orgs select {{name}}"
        arguments:
          - name: name
            type: positional
            required: true
            description: Name of the organization
            examples:
              - my-organization
      - name: select
        description: Set the named organization as your active org for all subsequent commands
        alias: s
        examples:
          - 'tigris orgs select my-org'
        messages:
          onStart: ''
          onSuccess: "Organization '{{name}}' selected"
          onFailure: 'Failed to select organization'
        arguments:
          - name: name
            type: positional
            required: true
            description: Name of the organization
            examples:
              - my-organization

  #########################
  # Manage buckets
  #########################
  - name: buckets
    description: Create, inspect, update, and delete buckets. Buckets are top-level containers that hold objects
    alias: b
    examples:
      - 'tigris buckets list'
      - 'tigris buckets create my-bucket'
      - 'tigris buckets get my-bucket'
      - 'tigris buckets delete my-bucket'
    commands:
      # list
      - name: list
        description: List all buckets in the current organization
        alias: l
        examples:
          - 'tigris buckets list'
          - 'tigris buckets list --format json'
        messages:
          onStart: 'Listing buckets...'
          onSuccess: 'Found {{count}} bucket(s)'
          onFailure: 'Failed to list buckets'
          onEmpty: 'No buckets found'
        arguments:
          - name: format
            description: Output format
            alias: f
            options: [json, table, xml]
            default: table
      # create
      - name: create
        description: Create a new bucket with optional access, tier, consistency, and region settings
        alias: c
        examples:
          - 'tigris buckets create my-bucket'
          - 'tigris buckets create my-bucket --access public --region iad'
          - 'tigris buckets create my-bucket --enable-snapshots --default-tier STANDARD_IA'
        messages:
          onStart: 'Creating bucket...'
          onSuccess: "Bucket '{{name}}' created successfully"
          onFailure: 'Failed to create bucket'
        arguments:
          - name: name
            description: Name of the bucket
            type: positional
            required: false
            examples:
              - my-bucket
          - name: access
            description: Access level
            alias: a
            options: *access_options
            default: private
          - name: enable-snapshots
            description: Enable snapshots for the bucket
            alias: s
            type: flag
            default: false
          - name: default-tier
            description: Choose the default tier for the bucket
            alias: t
            options: *tier_options
            default: STANDARD
          - name: consistency
            description: Choose the consistency level for the bucket
            alias: c
            options: *consistency_options
            default: default
          - name: region
            description: Region
            alias: r
            options: *region_options
            default: 'global'
      # get
      - name: get
        description: Show details for a bucket including access level, region, tier, and custom domain
        alias: g
        examples:
          - 'tigris buckets get my-bucket'
        messages:
          onStart: 'Getting bucket details...'
          onSuccess: ''
          onFailure: 'Failed to get bucket details'
        arguments:
          - name: name
            description: Name of the bucket
            type: positional
            required: true
            examples:
              - my-bucket
      # delete
      - name: delete
        description: Delete one or more buckets by name. The bucket must be empty or delete-protection must be off
        alias: d
        examples:
          - 'tigris buckets delete my-bucket'
          - 'tigris buckets delete bucket-a,bucket-b'
        messages:
          onStart: 'Deleting bucket...'
          onSuccess: "Bucket '{{name}}' deleted successfully"
          onFailure: "Failed to delete bucket '{{name}}'"
        arguments:
          - name: name
            description: Name of the bucket or comma separated list of buckets
            type: positional
            required: true
            multiple: true
            examples:
              - my-bucket
      # set
      - name: set
        description: Update settings on an existing bucket such as access level, region, caching, or custom domain
        alias: s
        examples:
          - 'tigris buckets set my-bucket --access public'
          - "tigris buckets set my-bucket --region iad,fra --cache-control 'max-age=3600'"
          - 'tigris buckets set my-bucket --custom-domain assets.example.com'
        messages:
          onStart: 'Updating bucket...'
          onSuccess: 'Bucket {{name}} updated successfully'
          onFailure: 'Failed to update bucket'
        arguments:
          - name: name
            description: Name of the bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: access
            description: Bucket access level
            options: *access_options
          - name: region
            description: Allowed regions (can specify multiple)
            options: *region_options
            multiple: true
          - name: allow-object-acl
            description: Enable object-level ACL
            type: boolean
          - name: disable-directory-listing
            description: Disable directory listing
            type: boolean
          - name: cache-control
            description: Default cache-control header value
          - name: custom-domain
            description: Custom domain for the bucket
          - name: enable-delete-protection
            description: Enable delete protection
            type: boolean

  #########################
  # Manage forks
  #########################
  - name: forks
    description: List and create forks. A fork is a writable copy-on-write clone of a bucket, useful for testing or branching data
    alias: f
    examples:
      - 'tigris forks list my-bucket'
      - 'tigris forks create my-bucket my-fork'
    commands:
      # list
      - name: list
        description: List all forks created from the given source bucket
        alias: l
        examples:
          - 'tigris forks list my-bucket'
          - 'tigris forks list my-bucket --format json'
        messages:
          onStart: 'Listing forks...'
          onSuccess: 'Found {{count}} fork(s)'
          onFailure: 'Failed to list forks'
          onEmpty: 'No forks found for this bucket'
        arguments:
          - name: name
            description: Name of the source bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: format
            description: Output format
            alias: f
            options: [json, table, xml]
            default: table
      # create
      - name: create
        description: Create a new fork (copy-on-write clone) of the source bucket. Optionally fork from a specific snapshot
        alias: c
        examples:
          - 'tigris forks create my-bucket my-fork'
          - 'tigris forks create my-bucket my-fork --snapshot snap-2025-01-01'
        messages:
          onStart: 'Creating fork...'
          onSuccess: "Fork '{{forkName}}' created from '{{name}}'"
          onFailure: 'Failed to create fork'
        arguments:
          - name: name
            description: Name of the source bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: fork-name
            description: Name for the new fork
            type: positional
            required: true
            examples:
              - my-fork
          - name: snapshot
            description: Create fork from a specific snapshot
            alias: s

  #########################
  # Manage snapshots
  #########################
  - name: snapshots
    description: List and take snapshots. A snapshot is a point-in-time, read-only copy of a bucket's state
    alias: s
    examples:
      - 'tigris snapshots list my-bucket'
      - 'tigris snapshots take my-bucket'
    commands:
      # list
      - name: list
        description: List all snapshots for the given bucket, ordered by creation time
        alias: l
        examples:
          - 'tigris snapshots list my-bucket'
          - 'tigris snapshots list my-bucket --format json'
        messages:
          onStart: 'Listing snapshots...'
          onSuccess: 'Found {{count}} snapshot(s)'
          onFailure: 'Failed to list snapshots'
          onEmpty: 'No snapshots found for this bucket'
        arguments:
          - name: name
            description: Name of the bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: format
            description: Output format
            alias: f
            options: [json, table, xml]
            default: table
      # take
      - name: take
        description: Take a new snapshot of the bucket's current state. Optionally provide a name for the snapshot
        alias: t
        examples:
          - 'tigris snapshots take my-bucket'
          - 'tigris snapshots take my-bucket my-snapshot'
        messages:
          onStart: 'Taking snapshot...'
          onSuccess: "Snapshot '{{snapshotName}}' taken for bucket '{{name}}'"
          onFailure: 'Failed to take snapshot'
        arguments:
          - name: name
            description: Name of the bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: snapshot-name
            description: Name of the snapshot (optional, auto-generated if omitted)
            type: positional
            required: false
            examples:
              - my-snapshot

  #########################
  # Manage objects
  #########################
  - name: objects
    description: Low-level object operations for listing, downloading, uploading, and deleting individual objects in a bucket
    alias: o
    examples:
      - 'tigris objects list my-bucket'
      - 'tigris objects get my-bucket report.pdf --output ./report.pdf'
      - 'tigris objects put my-bucket report.pdf ./report.pdf'
      - 'tigris objects delete my-bucket report.pdf'
    commands:
      # list
      - name: list
        description: List objects in a bucket, optionally filtered by a key prefix
        alias: l
        examples:
          - 'tigris objects list my-bucket'
          - 'tigris objects list my-bucket --prefix images/'
          - 'tigris objects list my-bucket --format json'
        messages:
          onStart: 'Listing objects...'
          onSuccess: 'Found {{count}} object(s)'
          onFailure: 'Failed to list objects'
          onEmpty: 'No objects found'
        arguments:
          - name: bucket
            description: Name of the bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: prefix
            description: Filter objects by key prefix (e.g. "images/" to list only images)
            alias: p
          - name: format
            description: Output format
            alias: f
            options: [json, table, xml]
            default: table
      # get
      - name: get
        description: Download an object by key. Prints to stdout by default, or saves to a file with --output
        alias: g
        examples:
          - 'tigris objects get my-bucket config.json'
          - 'tigris objects get my-bucket archive.zip --output ./archive.zip --mode stream'
        messages:
          onStart: 'Getting object...'
          onSuccess: ''
          onFailure: 'Failed to get object'
        arguments:
          - name: bucket
            description: Name of the bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: key
            description: Key of the object
            type: positional
            required: true
            examples:
              - my-file.txt
          - name: output
            description: Output file path (if not specified, prints to stdout)
            alias: o
          - name: mode
            description: 'Response mode: "string" loads into memory, "stream" writes in chunks (auto-detected from extension if not specified)'
            alias: m
            options: [string, stream]
      # put
      - name: put
        description: Upload a local file as an object. Content-type is auto-detected from extension unless overridden
        alias: p
        examples:
          - 'tigris objects put my-bucket report.pdf ./report.pdf'
          - 'tigris objects put my-bucket logo.png ./logo.png --access public --content-type image/png'
        messages:
          onStart: 'Uploading object...'
          onSuccess: "Object '{{key}}' uploaded successfully"
          onFailure: 'Failed to upload object'
        arguments:
          - name: bucket
            description: Name of the bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: key
            description: Key for the object
            type: positional
            required: true
            examples:
              - my-file.txt
          - name: file
            description: Path to the local file to upload
            type: positional
            examples:
              - ./my-file.txt
          - name: access
            description: Access level
            alias: a
            options: *access_options
            default: private
          - name: content-type
            description: Content type (auto-detected from extension if omitted)
            alias: t
          - name: format
            description: Output format
            alias: f
            options: [json, table, xml]
            default: table
      # delete
      - name: delete
        description: Delete one or more objects by key from the given bucket
        alias: d
        examples:
          - 'tigris objects delete my-bucket old-file.txt'
          - 'tigris objects delete my-bucket file-a.txt,file-b.txt'
        messages:
          onStart: 'Deleting object...'
          onSuccess: "Object '{{key}}' deleted successfully"
          onFailure: 'Failed to delete object'
        arguments:
          - name: bucket
            description: Name of the bucket
            type: positional
            required: true
            examples:
              - my-bucket
          - name: key
            description: Key of the object (comma separated for multiple)
            type: positional
            required: true
            multiple: true
            examples:
              - my-file.txt
      # set
      - name: set
        description: Update settings on an existing object such as access level
        alias: s
        examples:
          - 'tigris objects set my-bucket my-file.txt --access public'
          - 'tigris objects set my-bucket my-file.txt --access private'
        messages:
          onStart: 'Updating object...'
          onSuccess: "Object '{{key}}' updated successfully"
          onFailure: 'Failed to update object'
        arguments:
          - name: bucket
            description: Name of the bucket
            type: positional
            required: true
          - name: key
            description: Key of the object
            type: positional
            required: true
          - name: access
            description: Access level
            alias: a
            options: *access_options
            required: true
          - name: new-key
            description: Rename the object to a new key
            alias: n

  #########################
  # Manage access keys
  #########################
  - name: access-keys
    description: Create, list, inspect, delete, and assign roles to access keys. Access keys are credentials used for programmatic API access
    alias: keys
    examples:
      - 'tigris access-keys list'
      - 'tigris access-keys create my-ci-key'
      - 'tigris access-keys assign tid_AaBb --bucket my-bucket --role Editor'
    commands:
      - name: list
        description: List all access keys in the current organization
        alias: l
        examples:
          - 'tigris access-keys list'
        messages:
          onStart: ''
          onSuccess: ''
          onFailure: 'Failed to list access keys'
          onEmpty: 'No access keys found'
      - name: create
        description: Create a new access key with the given name. Returns the key ID and secret (shown only once)
        alias: c
        examples:
          - 'tigris access-keys create my-ci-key'
        messages:
          onStart: 'Creating access key...'
          onSuccess: 'Access key created'
          onFailure: 'Failed to create access key'
        arguments:
          - name: name
            description: Name for the access key
            type: positional
            required: true
            examples:
              - my-key
      - name: delete
        description: Permanently delete an access key by its ID. This revokes all access immediately
        alias: d
        examples:
          - 'tigris access-keys delete tid_AaBbCcDdEeFf'
        messages:
          onStart: 'Deleting access key...'
          onSuccess: 'Access key deleted'
          onFailure: 'Failed to delete access key'
        arguments:
          - name: id
            description: Access key ID
            type: positional
            required: true
            examples:
              - tid_AaBbCcDdEeFf
      - name: get
        description: Show details for an access key including its name, creation date, and assigned bucket roles
        alias: g
        examples:
          - 'tigris access-keys get tid_AaBbCcDdEeFf'
        messages:
          onStart: ''
          onSuccess: ''
          onFailure: 'Failed to get access key'
        arguments:
          - name: id
            description: Access key ID
            type: positional
            required: true
            examples:
              - tid_AaBbCcDdEeFf
      - name: assign
        description: Assign per-bucket roles to an access key. Pair each --bucket with a --role (Editor or ReadOnly), or use --admin for org-wide access
        alias: a
        examples:
          - 'tigris access-keys assign tid_AaBb --bucket my-bucket --role Editor'
          - 'tigris access-keys assign tid_AaBb --bucket a,b --role Editor,ReadOnly'
          - 'tigris access-keys assign tid_AaBb --admin'
          - 'tigris access-keys assign tid_AaBb --revoke-roles'
        messages:
          onStart: 'Assigning bucket roles...'
          onSuccess: 'Bucket roles assigned'
          onFailure: 'Failed to assign bucket roles'
        arguments:
          - name: id
            description: Access key ID
            type: positional
            required: true
            examples:
              - tid_AaBbCcDdEeFf
          - name: bucket
            alias: b
            description: Bucket name (can specify multiple, comma-separated). Each bucket is paired positionally with a --role value
            multiple: true
          - name: role
            alias: r
            description: Role to assign (can specify multiple, comma-separated). Each role pairs with the corresponding --bucket value
            multiple: true
            options:
              - Editor
              - ReadOnly
          - name: admin
            description: Grant admin access to all buckets in the organization
            type: flag
          - name: revoke-roles
            description: Revoke all bucket roles from the access key
            type: flag
  #########################
  # IAM - Identity and Access Management
  #########################
  - name: iam
    description: Identity and Access Management - manage policies, roles, and permissions
    examples:
      - 'tigris iam policies list'
      - 'tigris iam policies get arn:aws:iam::org_id:policy/my-policy'
      - 'tigris iam policies create my-policy --document policy.json'
    commands:
      - name: policies
        description: Manage IAM policies. Policies define permissions for access keys
        alias: p
        examples:
          - 'tigris iam policies list'
          - 'tigris iam policies get'
        commands:
          - name: list
            description: List all policies in the current organization
            alias: l
            examples:
              - 'tigris iam policies list'
            messages:
              onStart: ''
              onSuccess: ''
              onFailure: 'Failed to list policies'
              onEmpty: 'No policies found'
            arguments:
              - name: format
                description: Output format
                alias: f
                options: [json, table, xml]
                default: table
          - name: get
            description: Show details for a policy including its document and attached users. If no ARN provided, shows interactive selection
            alias: g
            examples:
              - 'tigris iam policies get'
              - 'tigris iam policies get arn:aws:iam::org_id:policy/my-policy'
            messages:
              onStart: ''
              onSuccess: ''
              onFailure: 'Failed to get policy'
              onEmpty: 'No policies found'
            arguments:
              - name: resource
                description: Policy ARN. If omitted, shows interactive selection
                type: positional
                required: false
                examples:
                  - arn:aws:iam::org_id:policy/my-policy
              - name: format
                description: Output format
                alias: f
                options: [json, table, xml]
                default: table
          - name: create
            description: Create a new policy with the given name and policy document. Document can be provided via file, inline JSON, or stdin
            alias: c
            examples:
              - 'tigris iam policies create my-policy --document policy.json'
              - 'tigris iam policies create my-policy --document ''{"Version":"2012-10-17","Statement":[...]}'''
              - 'cat policy.json | tigris iam policies create my-policy'
            messages:
              onStart: 'Creating policy...'
              onSuccess: "Policy '{{name}}' created"
              onFailure: 'Failed to create policy'
            arguments:
              - name: name
                description: Policy name
                type: positional
                required: true
                examples:
                  - my-policy
              - name: document
                description: Policy document (JSON file path or inline JSON). If omitted, reads from stdin
                alias: d
                required: false
              - name: description
                description: Policy description
          - name: edit
            description: Update an existing policy's document. Document can be provided via file, inline JSON, or stdin. If no ARN provided, shows interactive selection
            alias: e
            examples:
              - 'tigris iam policies edit --document policy.json'
              - 'tigris iam policies edit arn:aws:iam::org_id:policy/my-policy --document policy.json'
              - 'cat policy.json | tigris iam policies edit arn:aws:iam::org_id:policy/my-policy'
            messages:
              onStart: 'Updating policy...'
              onSuccess: "Policy '{{resource}}' updated"
              onFailure: 'Failed to update policy'
              onEmpty: 'No policies found'
            arguments:
              - name: resource
                description: Policy ARN. If omitted, shows interactive selection
                type: positional
                required: false
                examples:
                  - arn:aws:iam::org_id:policy/my-policy
              - name: document
                description: New policy document (JSON file path or inline JSON). If omitted, reads from stdin
                alias: d
                required: false
              - name: description
                description: Update policy description
                required: false
          - name: delete
            description: Delete a policy. If no ARN provided, shows interactive selection
            alias: d
            examples:
              - 'tigris iam policies delete'
              - 'tigris iam policies delete arn:aws:iam::org_id:policy/my-policy'
            messages:
              onStart: 'Deleting policy...'
              onSuccess: "Policy '{{resource}}' deleted"
              onFailure: 'Failed to delete policy'
              onEmpty: 'No policies found'
            arguments:
              - name: resource
                description: Policy ARN. If omitted, shows interactive selection
                type: positional
                required: false
                examples:
                  - arn:aws:iam::org_id:policy/my-policy
